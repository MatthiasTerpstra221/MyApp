<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="HubSpot Onboarding Calculator by Leapforce - Calculate your HubSpot onboarding package"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>HubSpot Onboarding Calculator | Leapforce</title>
    
    <!-- Minimal error handling and fallback -->
    <script>
      // Redirect to fallback page if nothing loads within 3 seconds
      setTimeout(function() {
        if (!window.appLoaded) {
          console.error("App failed to initialize within 3 seconds, redirecting to fallback page");
          window.location.href = '/fallback.html';
        }
      }, 3000);

      // Global error handler
      window.onerror = function(message, source, lineno, colno, error) {
        console.error('Caught error:', message, source, error);
        document.getElementById('loading-spinner').style.display = 'none';
        document.getElementById('error-message').style.display = 'block';
        return false;
      };
    </script>
    
    <style>
      #root-loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        text-align: center;
        padding: 20px;
      }
      .loading-title {
        color: #ea580c;
        margin-bottom: 20px;
      }
      #loading-spinner {
        width: 40px;
        height: 40px;
        border: 5px solid #f3f4f6;
        border-top: 5px solid #ea580c;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 20px 0;
      }
      #error-message {
        display: none;
        color: #ef4444;
        margin: 20px 0;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      .fallback-button {
        display: inline-block;
        background-color: #ea580c;
        color: white;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    
    <!-- Loading state while React initializes -->
    <div id="root-loading">
      <h1 class="loading-title">HubSpot Onboarding Calculator</h1>
      <p>Loading the calculator...</p>
      <div id="loading-spinner"></div>
      <div id="error-message">
        <p>There was an error loading the calculator.</p>
        <p>Please try our alternative page:</p>
        <a href="fallback.html" class="fallback-button">Go to Simplified Version</a>
      </div>
    </div>
    
    <div id="root"></div>
    
    <script>
      // Mark the app as loaded when React initializes
      window.appLoaded = false;
      
      // Listen for the root div being populated (a sign React has started)
      const observer = new MutationObserver(function(mutations) {
        for (const mutation of mutations) {
          if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
            window.appLoaded = true;
            // Hide the loading screen
            document.getElementById('root-loading').style.display = 'none';
            observer.disconnect();
            break;
          }
        }
      });
      
      // Start observing the root element for child additions
      observer.observe(document.getElementById('root'), { childList: true, subtree: true });
    </script>
  </body>
</html>
