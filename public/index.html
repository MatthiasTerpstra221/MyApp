<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="HubSpot Onboarding Calculator by Leapforce - Calculate your HubSpot onboarding package"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>HubSpot Onboarding Calculator | Leapforce</title>

    <!-- HubSpot Form Script -->
    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/embed/v2.js"></script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <!-- HubSpot Tracking Code -->
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/7208949.js"></script>

    <!-- HubSpot Form Helper -->
    <script>
      window.hsFormHelper = {
        createForm: function(containerId, packageKeys) {
          if (window.hbspt) {
            window.hbspt.forms.create({
              portalId: "7208949",
              formId: "699d6d6a-52b4-4439-b6ea-2584491b8baa",
              region: "na1",
              target: `#${containerId}`,
              onFormReady: function($form) {
                // Find or create the hidden field
                let hiddenField = $form.querySelector('input[name="hubspot_standard_onboarding_key"]');
                if (!hiddenField) {
                  hiddenField = document.createElement('input');
                  hiddenField.type = 'hidden';
                  hiddenField.name = 'hubspot_standard_onboarding_key';
                  $form.appendChild(hiddenField);
                }
                // Set the package keys
                hiddenField.value = packageKeys;
                console.log('Form ready with package keys:', packageKeys);
              },
              onFormSubmitted: function() {
                console.log('Form submitted successfully');
                // Dispatch a custom event that React can listen for
                window.dispatchEvent(new CustomEvent('hubspotFormSubmitted'));
              }
            });
          }
        }
      };
    </script>
  </body>
</html>
